{% extends "base.html" %}

{% block content %}
<header class="app-header">
  <div class="container" style="display: flex; justify-content: space-between; align-items: center;">
    <div>
      <h1 style="margin: 0; font-size: 1.5rem;">Envelope Budget</h1>
      <p style="margin: 0; font-size: 0.8rem; opacity: 0.7;">Intentional Spending</p>
    </div>
    <form action="{{ url_for('logout') }}" method="post" style="margin: 0;">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
      <button type="submit" class="outline secondary" style="padding: 0.5rem 1rem; font-size: 0.8rem;">Logout</button>
    </form>
  </div>
</header>

<section class="grid">
  {% if envelopes %}
    {% for env in envelopes %}
      {% include "partials/envelope_card.html" %}
    {% endfor %}
  {% else %}
    <article class="card empty-state">
      <h2>No envelopes yet</h2>
      <p>Add your first envelope to start tracking spending.</p>
    </article>
  {% endif %}
</section>

<details class="card manage-panel">
  <summary>Manage Envelopes</summary>
  <form action="{{ url_for('add_envelope') }}" method="post">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
    <label>
      Name
      <input name="name" placeholder="Groceries" required />
    </label>
    <label>
      Base amount
      <input name="base_amount" type="number" step="0.01" min="0" required />
    </label>
    <label>
      Type
      <select name="mode" required>
        <option value="reset">Reset</option>
        <option value="rollover">Rollover</option>
      </select>
    </label>
    <button type="submit">Create envelope</button>
  </form>
</details>
{% endblock %}
