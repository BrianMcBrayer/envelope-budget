{% extends "base.html" %}

{% block content %}
<header class="app-header">
  <div
    class="container"
    style="display: flex; justify-content: space-between; align-items: center; padding-top: 2rem;"
  >
    <hgroup>
      <h1>Envelope Budget</h1>
      <p>Intentional Spending</p>
    </hgroup>
    <form action="{{ url_for('logout') }}" method="post">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
      <button type="submit" class="outline contrast">Logout</button>
    </form>
  </div>
</header>

<div class="dashboard-grid">
  <article class="card summary-card">
    <div class="grid">
      <div>
        <small>Total Available</small>
        <h2>{{ total_available|currency }}</h2>
      </div>
      <div style="text-align: right;">
        <small>Monthly Budgeted</small>
        <h2>{{ monthly_budgeted|currency }}</h2>
      </div>
    </div>
  </article>

  {% if envelopes %}
    {% for env in envelopes %}
      {% include "partials/envelope_card.html" %}
    {% endfor %}
  {% else %}
    <article class="card empty-state" style="grid-column: 1 / -1;">
      <h3>No envelopes yet</h3>
      <p>Create your first envelope below.</p>
    </article>
  {% endif %}
</div>

<div style="margin-top: 3rem; max-width: 600px; margin-left: auto; margin-right: auto;">
  <article>
    <header><strong>Add New Envelope</strong></header>
    <form action="{{ url_for('add_envelope') }}" method="post">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
      <div class="grid">
        <label>
          Name
          <input name="name" placeholder="e.g. Groceries" required />
        </label>
        <label>
          Amount
          <input
            name="base_amount"
            type="number"
            step="0.01"
            min="0"
            placeholder="0.00"
            required
          />
        </label>
      </div>
      <label>
        Mode
        <select name="mode" required>
          <option value="reset">Reset Monthly</option>
          <option value="rollover">Rollover Funds</option>
        </select>
      </label>
      <button type="submit">Create Envelope</button>
    </form>
  </article>
</div>
{% endblock %}
